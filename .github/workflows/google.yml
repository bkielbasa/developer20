name: Build and Deploy to GKE

on:
  push:
    branches:
      - master

jobs:
  deploy:
    - name: Setup Hugo
      run: wget -O /tmp/hugo.deb https://github.com/gohugoio/hugo/releases/download/v0.52/hugo_0.52_Linux-64bit.deb && sudo dpkg -i /tmp/hugo.deb
    - name: build
      run: hugo
    - name: Setup Google Cloud
      uses: actions/gcloud/auth@master
      env:
        GCLOUD_AUTH: ${{ secrets.GOOGLE_APPLICATION_CREDENTIALS }}
